(function(E){var C=this,D,A,B,F;D=function(I){var L,K,J,G,H;if(I instanceof D){if(arguments.length>1&&arguments[1]==true){this.left=I.left;this.top=I.top;this.right=I.right;this.bottom=I.bottom;this.width=I.width;this.height=I.height;}else{return I;}}else{if(typeof I==="string"||I instanceof E||(I.nodeType&&I.nodeType===1)){if(!(I instanceof E)){I=E(I);}if(I.size()===0){throw new TypeError("Region: Unable to find DOM element.");}L=I.offset();this.width=I.width();this.height=I.height();this.left=L.left;this.top=L.top;this.right=L.left+this.width;this.bottom=L.top+this.height;}else{if(I===C){I=E(C);this.width=I.width();this.height=I.height();this.left=(document.body)?I.scrollLeft():0;this.top=(document.body)?I.scrollTop():0;this.right=this.width+this.left;this.bottom=this.height+this.top;}else{if(arguments.length===1){if(!("top" in I)||!("left" in I)){throw new TypeError("Region: Invalid argument.");}J=I.left;K=I.top;H=("right" in I)?I.right:I.left;G=("bottom" in I)?I.bottom:I.top;this.left=Math.min(J,H);this.right=Math.max(J,H);this.top=Math.min(K,G);this.bottom=Math.max(K,G);this.width=this.right-this.left;this.height=this.bottom-this.top;}else{throw new TypeError("Region: Incorrect number of arguments.");}}}}return this;};D.prototype={area:function(){return this.width*this.height;},isAbove:function(G){G=new D(G);return(this.bottom<G.top);},isBelow:function(G){G=new D(G);return(this.top>G.bottom);},isLeftOf:function(G){G=new D(G);return(this.right<G.left);},isRightOf:function(G){G=new D(G);return(this.left>G.right);},intersects:function(G){G=new D(G);return(Math.min(this.bottom,G.bottom)>=Math.max(this.top,G.top)&&Math.min(this.right,G.right)>=Math.max(this.left,G.left));},intersection:function(G){G=new D(G);if(this.intersects(G)){return new D({left:Math.max(this.left,G.left),top:Math.max(this.top,G.top),right:Math.min(this.right,G.right),bottom:Math.min(this.bottom,G.bottom)});}else{return null;}},contains:function(G){G=new D(G);return(this.left<=G.left&&this.top<=G.top&&this.right>=G.right&&this.bottom>=G.bottom);},isContainedBy:function(G){G=new D(G);return(this.top>=G.top&&this.bottom<=G.bottom&&this.left>=G.left&&this.right<=G.right);}};E.Region=D;E.fn.region=function(){var G;if(arguments.length>0){G=new D(arguments[0]);return E(this).css({position:"absolute",left:G.left,top:G.top,width:G.width,height:G.height});}else{return new D(this);}};B=function(G){return function(){var H=new D(this);return H[G].apply(H,arguments);};};for(F in D.prototype){if(D.prototype.hasOwnProperty(F)){E.fn[F]=B(F);}}A=function(){var G=this;if(E.isReady){G.update();}else{E(function(){G.update();});}this.window=E(C).bind("load resize scroll",function(){G.update();});};A.prototype=E.extend(new D(C),{update:function(){this.width=this.window.width();this.height=this.window.height();this.left=this.window.scrollLeft();this.top=this.window.scrollTop();this.right=this.width+this.left;this.bottom=this.height+this.top;this.trigger();},bind:function(G){E(this).bind("viewport:change",G);},trigger:function(){E(this).trigger("viewport:change",this);}});E.ViewportRegion=A;E.Viewport=new A();}(jQuery));
